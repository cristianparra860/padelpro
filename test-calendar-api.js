const fetch = require('node-fetch'); async function test() { const today = new Date(); today.setHours(0,0,0,0); const sDate = today.toISOString(); const eDate = new Date(today); eDate.setDate(eDate.getDate()+1); const eISO = eDate.toISOString(); const clubRes = await fetch('http://localhost:9002/api/clubs'); const clubs = await clubRes.json(); const clubId = clubs[0]?.id; console.log('Club:', clubId); const calUrl = http://localhost:9002/api/admin/calendar?clubId=test-calendar-api.js{clubId}&startDate=test-calendar-api.js{sDate}&endDate=test-calendar-api.js{eISO}; const calRes = await fetch(calUrl); const calData = await calRes.json(); console.log('\nCalendar API:'); console.log('  Confirmadas:', calData.confirmedClasses?.length); console.log('  Propuestas:', calData.proposedClasses?.length); if(calData.confirmedClasses) calData.confirmedClasses.forEach(c => console.log('  -', new Date(c.start).toLocaleTimeString(), 'Pista', c.courtNumber, c.instructorName)); const tDate = today.toISOString().split('T')[0]; const tUrl = http://localhost:9002/api/timeslots?clubId=test-calendar-api.js{clubId}&date=test-calendar-api.js{tDate}; const tRes = await fetch(tUrl); const tData = await tRes.json(); const conf = tData.filter(s => s.courtId); console.log('\nTimeslots API:'); console.log('  Confirmadas:', conf.length); console.log('  Propuestas:', tData.length - conf.length); if(conf.length) conf.forEach(c => console.log('  -', new Date(c.start).toLocaleTimeString(), 'Pista', c.courtNumber, c.instructorName)); } test();
